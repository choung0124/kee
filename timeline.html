<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Swirling Timeline Animation</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      width: 100%;
      height: 100%;
      background: transparent;
    }
    .container {
      width: 100%;
      height: 100%;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    svg {
      width: 100%;
      height: 100%;
      max-width: 300px;
      max-height: 600px;
    }
    .path {
      fill: none;
      stroke-width: 2;
      stroke-linecap: round;
    }
    #tealPath {
      stroke: rgba(188, 230, 243, 0.8);
    }
    #pinkPath {
      stroke: rgba(255, 182, 193, 0.8);
    }
    #verticalLine {
      stroke: rgba(255, 255, 255, 0.9);
      stroke-width: 3;
    }
    .year-label {
      font-family: sans-serif;
      font-size: 20px;
      fill: #FFFFFF;
      font-weight: bold;
      text-anchor: middle;
    }
    .endpoint-circle {
      fill: rgba(255, 255, 255, 0.9);
    }
    .teal-circle {
      fill: rgba(188, 230, 243, 0.8);
    }
    .pink-circle {
      fill: rgba(255, 182, 193, 0.8);
    }
    .white-circle {
      fill: rgba(255, 255, 255, 0.9);
    }
    .profile-image {
      width: 50px;
      height: 50px;
      object-fit: cover;
      border-radius: 50%;
    }
  </style>
</head>
<body>
<div class="container">
  <svg viewBox="0 0 300 600" xmlns="http://www.w3.org/2000/svg">
    <!-- Define patterns for images -->
    <defs>
      <pattern id="keeImage" patternUnits="userSpaceOnUse" width="50" height="50" x="0" y="0">
        <image href="/Users/hschoung/kee/images/kee.png" width="50" height="50" preserveAspectRatio="xMidYMid slice"/>
      </pattern>
      <pattern id="meImage" patternUnits="userSpaceOnUse" width="50" height="50" x="250" y="0">
        <image href="/Users/hschoung/kee/images/me.png" width="50" height="50" preserveAspectRatio="xMidYMid slice"/>
      </pattern>
    </defs>

    <!-- Top Label -->
    <text class="year-label" x="150" y="60">2021</text>

    <!-- Vertical white line in the center -->
    <line 
      id="verticalLine" 
      x1="150" y1="100" 
      x2="150" y2="450" 
    />

    <!-- Top circles -->
    <circle class="teal-circle" cx="25" cy="25" r="25"/>
    <circle fill="url(#keeImage)" cx="25" cy="25" r="23"/>
    
    <circle stroke="white" stroke-width="8" fill="#F8F4FF" cx="150" cy="50" r="40"/>
    
    <circle class="pink-circle" cx="275" cy="25" r="25"/>
    <circle fill="url(#meImage)" cx="275" cy="25" r="23"/>
    
    <!-- Bottom circle -->
    <circle stroke="white" stroke-width="8" fill="#F8F4FF" cx="150" cy="500" r="40"/>

    <!-- Year labels inside circles -->
    <text class="year-label" x="150" y="55">2021</text>
    <text class="year-label" x="150" y="505">2025</text>

    <!-- Teal swirl path -->
    <path 
      id="tealPath" 
      class="path"
      d="M 25,50
         C 50,175   350,150  150,250
         C 0,325   275,350 150,460"
    />

    <!-- Pink swirl path -->
    <path 
      id="pinkPath" 
      class="path"
      d="M 275,50
         C 250,175  -50,150  150,250
         C 300,325  25,350  150,460"
    />
  </svg>
</div>

<script>
  function animatePath(pathId, duration) {
    const path = document.getElementById(pathId);
    const length = path.getTotalLength();
    
    path.style.strokeDasharray = length;
    path.style.strokeDashoffset = length;
    
    // Trigger reflow
    path.getBoundingClientRect();
    
    path.style.transition = `stroke-dashoffset ${duration}s ease-in-out`;
    path.style.strokeDashoffset = '0';
  }

  function resetPath(pathId) {
    const path = document.getElementById(pathId);
    path.style.transition = 'none';
    path.style.strokeDashoffset = path.getTotalLength();
  }

  function startAnimation() {
    // Start both animations
    animatePath('tealPath', 4);
    animatePath('pinkPath', 4);

    // After animation + delay, reset and repeat
    setTimeout(() => {
      resetPath('tealPath');
      resetPath('pinkPath');
      // Small delay before next animation
      setTimeout(startAnimation, 100);
    }, 4000 + 2000); // Animation duration (4s) + delay between animations (3s)
  }

  // Start animation when the component is loaded
  document.addEventListener('DOMContentLoaded', startAnimation);

  // Backup in case DOMContentLoaded doesn't fire in Streamlit
  window.addEventListener('load', startAnimation);
</script>
</body>
</html>
